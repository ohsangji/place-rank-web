<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>íšŒì›ê°€ì… - ì´ì§€ë³´ë“œ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --blue:#2563EB;--blue-dark:#1D4ED8;--blue-light:#DBEAFE;--blue-50:#EFF6FF;
  --navy:#0F172A;--slate:#334155;--gray:#64748B;--gray-light:#94A3B8;
  --gray-border:#E2E8F0;--gray-bg:#F8FAFC;--white:#FFFFFF;
  --green:#10B981;--green-light:#D1FAE5;--red:#EF4444;--amber:#F59E0B;
  --card-bg:#FFFFFF;--body-bg:#F8FAFC;--text:#0F172A;--text-sub:#64748B;
  --input-bg:#F8FAFC;--input-border:#E2E8F0;
  --header-bg:#FFFFFF;--header-border:#E2E8F0;
  --font:'Noto Sans KR',sans-serif;--radius:16px;
  --shadow-lg:0 10px 25px -5px rgba(15,23,42,.08),0 8px 10px -6px rgba(15,23,42,.03);
}
[data-theme="dark"]{
  --card-bg:#1E1E2E;--body-bg:#0F0F1A;--text:#E2E8F0;--text-sub:#94A3B8;
  --input-bg:#12121F;--input-border:rgba(255,255,255,.1);
  --header-bg:#1A1A2E;--header-border:rgba(255,255,255,.06);
  --gray-border:rgba(255,255,255,.08);--gray-bg:#12121F;--white:#1E1E2E;
  --shadow-lg:0 10px 25px rgba(0,0,0,.3);
}
body{font-family:var(--font);background:var(--body-bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column;-webkit-font-smoothing:antialiased;transition:background .3s,color .3s}

/* â”€â”€ í—¤ë” â”€â”€ */
.header{background:var(--header-bg);border-bottom:1px solid var(--header-border);padding:0 24px;transition:background .3s}
.header-inner{max-width:1080px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:56px}
.logo-area{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text)}
.logo-text{font-size:17px;font-weight:800;letter-spacing:-.03em}
.logo-text small{font-size:11px;font-weight:500;color:var(--text-sub);margin-left:4px}
.header-links a{font-size:13px;font-weight:600;color:var(--text-sub);text-decoration:none;padding:7px 14px;border-radius:8px;transition:all .15s}
.header-links a:hover{background:var(--blue-50);color:var(--blue)}
[data-theme="dark"] .header-links a:hover{background:rgba(37,99,235,.15)}

/* â”€â”€ ë©”ì¸ â”€â”€ */
.main{flex:1;display:flex;align-items:flex-start;justify-content:center;padding:32px 20px}
.auth-card{width:100%;max-width:520px;background:var(--card-bg);border:1px solid var(--gray-border);border-radius:var(--radius);padding:36px;box-shadow:var(--shadow-lg);transition:background .3s,border .3s}
.card-header{text-align:center;margin-bottom:8px}
.card-icon{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,var(--blue),var(--blue-dark));display:inline-flex;align-items:center;justify-content:center;margin-bottom:12px;box-shadow:0 6px 16px rgba(37,99,235,.25)}
.card-title{font-size:20px;font-weight:800;letter-spacing:-.03em}
.card-sub{font-size:12px;color:var(--text-sub);margin-top:4px}

/* â”€â”€ ìŠ¤í… â”€â”€ */
.steps{display:flex;align-items:center;justify-content:center;margin:24px 0 28px}
.step-item{display:flex;align-items:center}
.step-num{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;background:var(--gray-bg);border:2px solid var(--gray-border);color:var(--gray-light);transition:all .3s}
.step-num.active{background:var(--blue);border-color:var(--blue);color:white;box-shadow:0 0 0 4px rgba(37,99,235,.12)}
.step-num.done{background:var(--green);border-color:var(--green);color:white}
.step-lbl{font-size:11px;color:var(--gray-light);margin-left:5px;margin-right:10px;font-weight:500;transition:color .3s}
.step-lbl.active{color:var(--blue);font-weight:600}
.step-line{width:24px;height:2px;background:var(--gray-border);margin:0 2px;transition:background .3s;border-radius:1px}
.step-line.active{background:var(--blue)}

/* â”€â”€ í¼ â”€â”€ */
.form-group{margin-bottom:16px}
.form-label{display:block;font-size:13px;color:var(--text-sub);margin-bottom:6px;font-weight:600}
.form-label .req{color:var(--red);margin-left:1px}
.form-input{width:100%;padding:11px 14px;background:var(--input-bg);border:1.5px solid var(--input-border);border-radius:10px;color:var(--text);font-size:14px;font-family:var(--font);transition:border .2s,box-shadow .2s,background .3s}
.form-input::placeholder{color:var(--gray-light)}
.form-input:focus{outline:none;border-color:var(--blue);box-shadow:0 0 0 3px rgba(37,99,235,.1)}
.form-input:disabled{opacity:.5;cursor:not-allowed}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.form-hint{font-size:11px;color:var(--gray-light);margin-top:5px}

/* â”€â”€ ë¹„ë°€ë²ˆí˜¸ ëˆˆ ì•„ì´ì½˜ â”€â”€ */
.pw-wrap{position:relative}
.pw-wrap .form-input{padding-right:42px}
.pw-eye{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--gray-light);font-size:18px;padding:4px;transition:color .15s}
.pw-eye:hover{color:var(--text)}

/* â”€â”€ íšŒì› ìœ í˜• â”€â”€ */
.type-label{font-size:14px;font-weight:700;margin-bottom:14px}
.type-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:20px}
.type-card{padding:18px 10px;border:2px solid var(--gray-border);border-radius:12px;text-align:center;cursor:pointer;transition:all .2s;background:var(--card-bg);position:relative}
.type-card:hover{border-color:var(--blue-light)}
.type-card.selected{border-color:var(--blue);background:var(--blue-50);box-shadow:0 0 0 3px rgba(37,99,235,.1)}
[data-theme="dark"] .type-card.selected{background:rgba(37,99,235,.1)}
.type-card.selected::after{content:'âœ“';position:absolute;top:8px;right:10px;width:20px;height:20px;border-radius:50%;background:var(--blue);color:white;font-size:11px;font-weight:700;display:flex;align-items:center;justify-content:center}
.type-icon{font-size:28px;margin-bottom:6px}
.type-name{font-size:14px;font-weight:700}
.type-desc{font-size:11px;color:var(--text-sub);margin-top:3px;line-height:1.4}

/* â”€â”€ íŒŒì¼ ì—…ë¡œë“œ â”€â”€ */
.upload-section{margin-bottom:20px;display:none}
.upload-section.show{display:block;animation:fadeUp .3s ease}
.upload-area{border:2px dashed var(--gray-border);border-radius:12px;padding:30px 20px;text-align:center;cursor:pointer;transition:all .2s;background:var(--gray-bg)}
.upload-area:hover{border-color:var(--blue-light)}
.upload-area.dragover{border-color:var(--blue);background:var(--blue-50)}
.upload-area.has-file{border-color:var(--green);border-style:solid}
.upload-icon{font-size:32px;margin-bottom:8px;color:var(--gray-light)}
.upload-text{font-size:13px;color:var(--text-sub);line-height:1.6}
.upload-text strong{color:var(--text);display:block;margin-bottom:4px;font-size:14px}
.upload-btn{display:inline-block;margin-top:10px;padding:8px 22px;background:var(--blue);color:white;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;font-family:var(--font);transition:all .15s}
.upload-btn:hover{background:var(--blue-dark)}
.upload-info{display:flex;justify-content:space-between;margin-top:8px;font-size:11px;color:var(--gray-light)}
.upload-file-input{display:none}
.file-preview{display:none;align-items:center;gap:10px;padding:12px;background:var(--gray-bg);border:1px solid var(--gray-border);border-radius:10px;margin-top:10px}
.file-preview.show{display:flex}
.file-preview-icon{font-size:22px}
.file-preview-info{flex:1}
.file-preview-name{font-size:13px;font-weight:600}
.file-preview-size{font-size:11px;color:var(--text-sub)}
.file-preview-del{width:28px;height:28px;border-radius:6px;border:none;background:rgba(239,68,68,.1);color:var(--red);font-size:14px;cursor:pointer;display:flex;align-items:center;justify-content:center}

/* â”€â”€ ì¸ì¦í–‰ â”€â”€ */
.verify-row{display:flex;gap:8px}
.verify-row .form-input{flex:1}
.btn-verify{padding:0 16px;border:none;border-radius:10px;background:var(--slate);color:white;font-size:13px;font-weight:600;cursor:pointer;white-space:nowrap;transition:all .15s;font-family:var(--font)}
.btn-verify:hover{background:var(--navy)}
.btn-verify:disabled{opacity:.4;cursor:not-allowed}
.btn-verify.sent{background:var(--green)}

/* â”€â”€ ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ë°” â”€â”€ */
.pw-bar-wrap{height:4px;border-radius:2px;background:var(--gray-bg);margin-top:6px;overflow:hidden;border:1px solid var(--gray-border)}
.pw-bar{height:100%;border-radius:2px;transition:width .3s,background .3s;width:0}
.pw-msg{font-size:11px;margin-top:4px;min-height:16px;font-weight:600;transition:color .3s}

/* â”€â”€ ì•½ê´€ ì²´í¬ë°•ìŠ¤ (ì…€ëŸ¬ë‹·ì»´ ìŠ¤íƒ€ì¼) â”€â”€ */
.terms-section{border:1px solid var(--gray-border);border-radius:12px;overflow:hidden;margin-bottom:16px}
.terms-all{display:flex;align-items:center;gap:10px;padding:14px 16px;background:var(--gray-bg);border-bottom:1px solid var(--gray-border);cursor:pointer;font-weight:700;font-size:14px;transition:background .3s}
.terms-all:hover{background:var(--blue-50)}
[data-theme="dark"] .terms-all:hover{background:rgba(37,99,235,.08)}
.terms-all input{width:18px;height:18px;accent-color:var(--blue);cursor:pointer}
.terms-item{display:flex;align-items:center;padding:11px 16px;border-bottom:1px solid var(--gray-border);font-size:13px;transition:background .15s}
.terms-item:last-child{border-bottom:none}
.terms-item:hover{background:var(--gray-bg)}
[data-theme="dark"] .terms-item:hover{background:rgba(255,255,255,.02)}
.terms-item input{width:16px;height:16px;accent-color:var(--blue);cursor:pointer;margin-right:10px;flex-shrink:0}
.terms-item label{flex:1;cursor:pointer;color:var(--text-sub);font-weight:500}
.terms-item .view-btn{font-size:12px;color:var(--gray-light);text-decoration:none;font-weight:500;cursor:pointer;padding:4px 8px;border-radius:4px;transition:color .15s;background:none;border:none;font-family:var(--font)}
.terms-item .view-btn:hover{color:var(--blue)}

/* â”€â”€ ëª¨ë‹¬ â”€â”€ */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:9999;padding:20px}
.modal-overlay.show{display:flex}
.modal{background:var(--card-bg);border-radius:14px;width:100%;max-width:480px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 20px 60px rgba(0,0,0,.3);transition:background .3s}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid var(--gray-border)}
.modal-header h3{font-size:16px;font-weight:800}
.modal-close{background:none;border:none;font-size:20px;cursor:pointer;color:var(--text-sub);padding:4px}
.modal-close:hover{color:var(--text)}
.modal-body{padding:20px 24px;overflow-y:auto;flex:1}
.modal-content{background:var(--input-bg);border:1px solid var(--input-border);border-radius:10px;padding:16px;font-size:13px;color:var(--text-sub);line-height:1.8}
.modal-footer{padding:16px 24px;text-align:center;border-top:1px solid var(--gray-border)}
.modal-confirm{padding:10px 40px;border:none;border-radius:8px;background:var(--blue);color:white;font-size:14px;font-weight:600;cursor:pointer;font-family:var(--font);transition:all .15s}
.modal-confirm:hover{background:var(--blue-dark)}

/* â”€â”€ ë²„íŠ¼ â”€â”€ */
.btn-primary{width:100%;padding:13px;border:none;border-radius:10px;background:var(--blue);color:white;font-size:15px;font-weight:700;cursor:pointer;font-family:var(--font);transition:all .2s}
.btn-primary:hover{background:var(--blue-dark);transform:translateY(-1px);box-shadow:0 4px 12px rgba(37,99,235,.3)}
.btn-primary:disabled{opacity:.4;cursor:not-allowed;transform:none;box-shadow:none}

.btn-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:4px}
.btn-outline{padding:13px;border:1.5px solid var(--gray-border);border-radius:10px;background:var(--card-bg);color:var(--text);font-size:14px;font-weight:600;cursor:pointer;font-family:var(--font);transition:all .15s}
.btn-outline:hover{border-color:var(--blue);color:var(--blue);background:var(--blue-50)}
[data-theme="dark"] .btn-outline:hover{background:rgba(37,99,235,.1)}
.btn-fill{padding:13px;border:none;border-radius:10px;background:var(--blue);color:white;font-size:14px;font-weight:700;cursor:pointer;font-family:var(--font);transition:all .2s}
.btn-fill:hover{background:var(--blue-dark)}
.btn-fill:disabled{opacity:.4;cursor:not-allowed}

.link-login{text-align:center;margin-top:20px;padding-top:16px;border-top:1px solid var(--gray-border);font-size:13px;color:var(--text-sub)}
.link-login a{color:var(--blue);text-decoration:none;font-weight:600}

.step-panel{display:none}
.step-panel.active{display:block;animation:fadeUp .3s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

.msg{padding:10px 14px;border-radius:10px;font-size:13px;margin-bottom:16px;display:none;font-weight:500}
.msg.error{background:#FEF2F2;border:1px solid #FECACA;color:#DC2626}
[data-theme="dark"] .msg.error{background:rgba(239,68,68,.1);border-color:rgba(239,68,68,.3);color:#FCA5A5}
.msg.show{display:flex;align-items:center;gap:8px}

.complete-area{text-align:center;padding:20px 0}
.complete-icon{font-size:56px;margin-bottom:16px}
.complete-title{font-size:20px;font-weight:800;margin-bottom:8px}
.complete-desc{font-size:14px;color:var(--text-sub);line-height:1.7}

footer{text-align:center;padding:24px;color:var(--text-sub);font-size:11px;line-height:1.8}

.theme-toggle{position:fixed;bottom:24px;right:24px;width:48px;height:48px;border-radius:50%;border:1px solid var(--gray-border);background:var(--card-bg);color:var(--text);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:22px;box-shadow:0 4px 12px rgba(0,0,0,.1);transition:all .3s;z-index:998}
.theme-toggle:hover{transform:scale(1.1)}

.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-80px);padding:12px 24px;border-radius:10px;color:white;font-size:13px;font-weight:600;transition:transform .3s;z-index:9999;box-shadow:0 8px 24px rgba(0,0,0,.15)}
.toast.show{transform:translateX(-50%) translateY(0)}
.toast.success{background:var(--green)}.toast.error{background:var(--red)}

@media(max-width:540px){
  .auth-card{padding:28px 18px}
  .form-row{grid-template-columns:1fr}
  .type-grid{grid-template-columns:1fr}
  .step-lbl{display:none}
  .btn-row{grid-template-columns:1fr}
}
</style>
</head>
<body>
<div class="header"><div class="header-inner">
  <a class="logo-area" href="/">
    <svg width="28" height="28" viewBox="0 0 32 32" fill="none"><rect x="4" y="5" width="24" height="25" rx="4" fill="#2563EB"/><rect x="10" y="2" width="12" height="6" rx="3" fill="#1D4ED8" stroke="#2563EB" stroke-width="1"/><rect x="12" y="3" width="8" height="4" rx="2" fill="#93C5FD"/><rect x="8" y="12" width="10" height="2.5" rx="1.2" fill="#DBEAFE"/><rect x="8" y="17" width="12" height="2.5" rx="1.2" fill="#BFDBFE"/><rect x="8" y="22" width="8" height="2.5" rx="1.2" fill="#DBEAFE"/><circle cx="23" cy="23" r="6" fill="#10B981"/><path d="M20 23L22 25L26 21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    <span class="logo-text">ì´ì§€ë³´ë“œ <small>EasyBoard</small></span>
  </a>
  <div class="header-links"><a href="/">í™ˆ</a><a href="/login">ë¡œê·¸ì¸</a></div>
</div></div>

<div class="main"><div class="auth-card">
  <div class="card-header">
    <div class="card-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v2h20v-2c0-3.3-6.7-5-10-5z" fill="#DBEAFE"/></svg></div>
    <div class="card-title">íšŒì›ê°€ì… ì‹ ì²­</div>
    <div class="card-sub">ìŠ¹ì¸ì´ ëŠ¦ìœ¼ë©´ ê´€ë¦¬ì ë¬¸ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤</div>
  </div>

  <div class="steps" id="stepsBar">
    <div class="step-item"><div class="step-num active" id="sn1">1</div><span class="step-lbl active" id="sl1">íšŒì› ìœ í˜•</span></div>
    <div class="step-line" id="ln1"></div>
    <div class="step-item"><div class="step-num" id="sn2">2</div><span class="step-lbl" id="sl2">ê¸°ë³¸ ì •ë³´</span></div>
    <div class="step-line" id="ln2"></div>
    <div class="step-item"><div class="step-num" id="sn3">3</div><span class="step-lbl" id="sl3">ë³¸ì¸ ì¸ì¦</span></div>
    <div class="step-line" id="ln3"></div>
    <div class="step-item"><div class="step-num" id="sn4">4</div><span class="step-lbl" id="sl4">ë¹„ë°€ë²ˆí˜¸Â·ì•½ê´€</span></div>
  </div>

  <div class="msg" id="msg"><span id="msgIcon"></span><span id="msgText"></span></div>

  <!-- â•â•â• STEP 1: íšŒì› ìœ í˜• â•â•â• -->
  <div class="step-panel active" id="panel1">
    <div class="type-label">íšŒì› ìœ í˜• ì„ íƒ</div>
    <div class="type-grid">
      <div class="type-card selected" onclick="selectType('individual')" id="type-individual">
        <div class="type-icon">ğŸª</div><div class="type-name">ê°œì¸ ì‚¬ì—…ì</div><div class="type-desc">ê°œì¸ ì‚¬ì—…ìë“±ë¡ì¦ ë³´ìœ </div>
      </div>
      <div class="type-card" onclick="selectType('corporate')" id="type-corporate">
        <div class="type-icon">ğŸ¢</div><div class="type-name">ë²•ì¸ ì‚¬ì—…ì</div><div class="type-desc">ë²•ì¸ ì‚¬ì—…ìë“±ë¡ì¦ ë³´ìœ </div>
      </div>
      <div class="type-card" onclick="selectType('general')" id="type-general">
        <div class="type-icon">ğŸ‘¤</div><div class="type-name">ì¼ë°˜ íšŒì›</div><div class="type-desc">ì‚¬ì—…ìë“±ë¡ì¦ ì—†ìŒ</div>
      </div>
    </div>
    <div class="upload-section" id="uploadSection">
      <div class="form-label">ì‚¬ì—…ì ë“±ë¡ì¦ ì—…ë¡œë“œ <span class="req">*</span></div>
      <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
        <div class="upload-icon">ğŸ“„</div>
        <div class="upload-text"><strong>pdf, jpg, png í˜•ì‹ì˜<br>ì‚¬ì—…ì ë“±ë¡ì¦ ì—…ë¡œë“œ</strong></div>
        <button class="upload-btn" type="button" onclick="event.stopPropagation();document.getElementById('fileInput').click()">íŒŒì¼ ì„ íƒ</button>
        <input type="file" class="upload-file-input" id="fileInput" accept=".pdf,.jpg,.jpeg,.png" onchange="handleFile(this)">
      </div>
      <div class="upload-info"><span>íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</span><span id="fileSizeLabel">0MB / 10MB</span></div>
      <div class="file-preview" id="filePreview">
        <div class="file-preview-icon" id="fpIcon">ğŸ“„</div>
        <div class="file-preview-info"><div class="file-preview-name" id="fpName"></div><div class="file-preview-size" id="fpSize"></div></div>
        <button class="file-preview-del" onclick="removeFile()">âœ•</button>
      </div>
    </div>
    <button class="btn-primary" onclick="goStep(2)">ë‹¤ìŒ ë‹¨ê³„ â†’</button>
  </div>

  <!-- â•â•â• STEP 2: ê¸°ë³¸ ì •ë³´ â•â•â• -->
  <div class="step-panel" id="panel2">
    <div class="form-row">
      <div class="form-group"><label class="form-label">ì•„ì´ë”” <span class="req">*</span></label><input class="form-input" type="text" id="regId" placeholder="ì˜ë¬¸, ìˆ«ì 4~20ì"></div>
      <div class="form-group"><label class="form-label">ì´ë©”ì¼ <span class="req">*</span></label><input class="form-input" type="email" id="regEmail" placeholder="example@email.com"></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label class="form-label">ì´ë¦„ <span class="req">*</span></label><input class="form-input" type="text" id="regName" placeholder="ì‹¤ëª… ì…ë ¥"></div>
      <div class="form-group" id="companyGroup"><label class="form-label">íšŒì‚¬ëª… <span class="req">*</span></label><input class="form-input" type="text" id="regCompany" placeholder="íšŒì‚¬ëª… ë˜ëŠ” ìƒí˜¸ëª…"></div>
    </div>
    <div class="form-group"><label class="form-label">ì¶”ì²œì¸ ì•„ì´ë”” (ì„ íƒ)</label><input class="form-input" type="text" id="regReferrer" placeholder="ì¶”ì²œì¸ì´ ì—†ìœ¼ë©´ ë¹„ì›Œë‘ì„¸ìš”"><div class="form-hint">ì¶”ì²œì¸ì´ ì—†ìœ¼ë©´ ë¹„ì›Œë‘ì„¸ìš”.</div></div>
    <div class="btn-row"><button class="btn-outline" onclick="goStep(1)">â† ì´ì „</button><button class="btn-fill" onclick="goStep(3)">ë‹¤ìŒ ë‹¨ê³„ â†’</button></div>
  </div>

  <!-- â•â•â• STEP 3: ë³¸ì¸ ì¸ì¦ â•â•â• -->
  <div class="step-panel" id="panel3">
    <div class="form-group">
      <label class="form-label">íœ´ëŒ€í° ë²ˆí˜¸ <span class="req">*</span></label>
      <div class="verify-row"><input class="form-input" type="tel" id="regPhone" placeholder="010-0000-0000" maxlength="13"><button class="btn-verify" id="sendCodeBtn" onclick="sendCode()">ì¸ì¦ìš”ì²­</button></div>
      <div class="form-hint">010 ë²ˆí˜¸ë§Œ ê°€ëŠ¥ Â· ì¼ì¼ 5íšŒ ë°œì†¡ ì œí•œ</div>
    </div>
    <div class="form-group" id="codeGroup" style="display:none">
      <label class="form-label">ì¸ì¦ë²ˆí˜¸ <span class="req">*</span></label>
      <div class="verify-row"><input class="form-input" type="text" id="verifyCode" placeholder="6ìë¦¬ ì¸ì¦ë²ˆí˜¸" maxlength="6"><button class="btn-verify" onclick="verifyCode()">í™•ì¸</button></div>
      <div class="form-hint" id="codeTimer" style="color:var(--amber)"></div>
    </div>
    <div class="btn-row"><button class="btn-outline" onclick="goStep(2)">â† ì´ì „</button><button class="btn-fill" id="step3Next" onclick="goStep(4)" disabled>ë‹¤ìŒ ë‹¨ê³„ â†’</button></div>
  </div>

  <!-- â•â•â• STEP 4: ë¹„ë°€ë²ˆí˜¸ & ì•½ê´€ â•â•â• -->
  <div class="step-panel" id="panel4">
    <div class="form-group">
      <label class="form-label">ë¹„ë°€ë²ˆí˜¸ <span class="req">*</span></label>
      <div class="pw-wrap"><input class="form-input" type="password" id="regPw" placeholder="ì˜ë¬¸+ìˆ«ì+íŠ¹ìˆ˜ë¬¸ì 8ì ì´ìƒ" oninput="checkPw()"><button class="pw-eye" type="button" onclick="togglePwEye('regPw',this)">ğŸ‘</button></div>
      <div class="pw-bar-wrap"><div class="pw-bar" id="pwBar"></div></div>
      <div class="pw-msg" id="pwMsg"></div>
    </div>
    <div class="form-group">
      <label class="form-label">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ <span class="req">*</span></label>
      <div class="pw-wrap"><input class="form-input" type="password" id="regPw2" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥" oninput="checkPwMatch()"><button class="pw-eye" type="button" onclick="togglePwEye('regPw2',this)">ğŸ‘</button></div>
      <div class="pw-msg" id="pwMatchMsg"></div>
    </div>

    <!-- ì•½ê´€ (ì…€ëŸ¬ë‹·ì»´ ìŠ¤íƒ€ì¼) -->
    <div class="terms-section">
      <div class="terms-all" onclick="toggleAllTerms()">
        <input type="checkbox" id="agreeAll" onclick="event.stopPropagation();toggleAllTerms()">
        <span>ì•½ê´€ ì „ì²´ ë™ì˜</span>
      </div>
      <div class="terms-item">
        <input type="checkbox" id="agree1" class="term-check" onchange="syncTerms()">
        <label for="agree1">(í•„ìˆ˜) ë§Œ 14ì„¸ ì´ìƒì…ë‹ˆë‹¤</label>
      </div>
      <div class="terms-item">
        <input type="checkbox" id="agree2" class="term-check" onchange="syncTerms()">
        <label for="agree2">(í•„ìˆ˜) ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë™ì˜</label>
        <button class="view-btn" onclick="openModal('terms')">ë³´ê¸°</button>
      </div>
      <div class="terms-item">
        <input type="checkbox" id="agree3" class="term-check" onchange="syncTerms()">
        <label for="agree3">(í•„ìˆ˜) ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</label>
        <button class="view-btn" onclick="openModal('privacy')">ë³´ê¸°</button>
      </div>
      <div class="terms-item">
        <input type="checkbox" id="agree4" class="term-check" onchange="syncTerms()">
        <label for="agree4">(ì„ íƒ) ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜</label>
        <button class="view-btn" onclick="openModal('marketing')">ë³´ê¸°</button>
      </div>
    </div>

    <div class="btn-row"><button class="btn-outline" onclick="goStep(3)">â† ì´ì „</button><button class="btn-fill" id="registerBtn" onclick="doRegister()">íšŒì›ê°€ì… ì‹ ì²­</button></div>
  </div>

  <!-- â•â•â• ì™„ë£Œ â•â•â• -->
  <div class="step-panel" id="panelDone">
    <div class="complete-area">
      <div class="complete-icon">ğŸ‰</div>
      <div class="complete-title">íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div>
      <div class="complete-desc">ìŠ¹ì¸ í›„ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ìŠ¹ì¸ì´ ëŠ¦ì–´ì§€ë©´ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.</div>
    </div>
    <button class="btn-primary" onclick="location.href='/login'" style="margin-top:12px">ë¡œê·¸ì¸í•˜ëŸ¬ ê°€ê¸° â†’</button>
  </div>

  <div class="link-login" id="linkLogin">ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? <a href="/login">ë¡œê·¸ì¸</a></div>
</div></div>

<!-- â•â•â• ì•½ê´€ ëª¨ë‹¬ë“¤ â•â•â• -->
<div class="modal-overlay" id="modal-terms" onclick="if(event.target===this)closeModal('terms')">
  <div class="modal">
    <div class="modal-header"><h3>ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€</h3><button class="modal-close" onclick="closeModal('terms')">âœ•</button></div>
    <div class="modal-body"><div class="modal-content">
      ì œ1ì¡° (ëª©ì )<br>ë³¸ ì•½ê´€ì€ ì´ì§€ë³´ë“œ(ì´í•˜ "íšŒì‚¬")ê°€ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì˜ ì´ìš©ì¡°ê±´ ë° ì ˆì°¨, íšŒì‚¬ì™€ íšŒì› ê°„ì˜ ê¶Œë¦¬, ì˜ë¬´ ë° ì±…ì„ì‚¬í•­ ë“±ì„ ê·œì •í•¨ì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤.<br><br>
      ì œ2ì¡° (ì„œë¹„ìŠ¤ ë‚´ìš©)<br>íšŒì‚¬ëŠ” ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ í‚¤ì›Œë“œ ì¶”ì¶œ, ìˆœìœ„ ë¶„ì„, í‚¤ì›Œë“œ ë¶„ì‚° ê´€ë¦¬ ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ëŠ” ë¬´ë£Œë¡œ ì œê³µë˜ë©°, í–¥í›„ ìœ ë£Œ ê¸°ëŠ¥ì´ ì¶”ê°€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br>
      ì œ3ì¡° (íšŒì›ê°€ì…)<br>íšŒì›ê°€ì…ì€ ì´ìš©ìê°€ ì•½ê´€ì— ë™ì˜í•˜ê³  íšŒì›ì •ë³´ë¥¼ ê¸°ì…í•œ í›„ íšŒì‚¬ê°€ ìŠ¹ì¸í•¨ìœ¼ë¡œì¨ ì„±ë¦½í•©ë‹ˆë‹¤.<br><br>
      ì œ4ì¡° (íšŒì›ì˜ ì˜ë¬´)<br>íšŒì›ì€ ì„œë¹„ìŠ¤ë¥¼ ì •ìƒì ì¸ ëª©ì ìœ¼ë¡œë§Œ ì´ìš©í•´ì•¼ í•˜ë©°, ìë™í™” ë„êµ¬ë¥¼ ì´ìš©í•œ ê³¼ë„í•œ ìš”ì²­ì´ë‚˜ ì„œë¹„ìŠ¤ ë‚¨ìš©, íƒ€ì¸ì˜ ê³„ì •ì„ ë„ìš©í•˜ëŠ” í–‰ìœ„ë¥¼ ê¸ˆì§€í•©ë‹ˆë‹¤.<br><br>
      ì œ5ì¡° (ì„œë¹„ìŠ¤ ë³€ê²½ ë° ì¤‘ë‹¨)<br>íšŒì‚¬ëŠ” ìš´ì˜ìƒ, ê¸°ìˆ ìƒì˜ í•„ìš”ì— ë”°ë¼ ì„œë¹„ìŠ¤ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì¤‘ë‹¨í•  ìˆ˜ ìˆìœ¼ë©°, ì´ ê²½ìš° ì‚¬ì „ì— ê³µì§€í•©ë‹ˆë‹¤.<br><br>
      ì œ6ì¡° (ë©´ì±…)<br>ì„œë¹„ìŠ¤ëŠ” ë„¤ì´ë²„ í”Œë«í¼ì˜ ë³€ê²½ì— ë”°ë¼ ì¼ì‹œì ìœ¼ë¡œ ì¤‘ë‹¨ë˜ê±°ë‚˜ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ì´ì— ëŒ€í•œ ì±…ì„ì€ íšŒì‚¬ì— ì—†ìŠµë‹ˆë‹¤.
    </div></div>
    <div class="modal-footer"><button class="modal-confirm" onclick="closeModal('terms')">í™•ì¸</button></div>
  </div>
</div>

<div class="modal-overlay" id="modal-privacy" onclick="if(event.target===this)closeModal('privacy')">
  <div class="modal">
    <div class="modal-header"><h3>ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</h3><button class="modal-close" onclick="closeModal('privacy')">âœ•</button></div>
    <div class="modal-body"><div class="modal-content">
      1. ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ í•­ëª©: ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸, ì´ë¦„, ì´ë©”ì¼, íšŒì‚¬ëª…, íœ´ëŒ€í°ë²ˆí˜¸<br><br>
      2. ìˆ˜ì§‘ ëª©ì : íšŒì› ì‹ë³„ ë° ì„œë¹„ìŠ¤ ì œê³µ, ê³ ê° ë¬¸ì˜ ëŒ€ì‘, ì„œë¹„ìŠ¤ ê°œì„ <br><br>
      3. ë³´ìœ  ë° ì´ìš© ê¸°ê°„: íšŒì› íƒˆí‡´ ì‹œê¹Œì§€ (ê´€ë ¨ ë²•ë ¹ì— ë”°ë¼ ì¼ì • ê¸°ê°„ ë³´ì¡´ì´ í•„ìš”í•œ ê²½ìš° í•´ë‹¹ ê¸°ê°„ê¹Œì§€)<br><br>
      4. ë™ì˜ ê±°ë¶€ ê¶Œë¦¬: ê°œì¸ì •ë³´ ìˆ˜ì§‘ì— ëŒ€í•œ ë™ì˜ë¥¼ ê±°ë¶€í•  ìˆ˜ ìˆìœ¼ë‚˜, ì´ ê²½ìš° íšŒì›ê°€ì…ì´ ì œí•œë©ë‹ˆë‹¤.<br><br>
      5. ê°œì¸ì •ë³´ëŠ” ì„œë¹„ìŠ¤ ì œê³µ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ë©°, ì œ3ìì—ê²Œ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </div></div>
    <div class="modal-footer"><button class="modal-confirm" onclick="closeModal('privacy')">í™•ì¸</button></div>
  </div>
</div>

<div class="modal-overlay" id="modal-marketing" onclick="if(event.target===this)closeModal('marketing')">
  <div class="modal">
    <div class="modal-header"><h3>ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜</h3><button class="modal-close" onclick="closeModal('marketing')">âœ•</button></div>
    <div class="modal-body"><div class="modal-content">
      ê·€í•˜ëŠ” ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹ ì— ëŒ€í•œ ë™ì˜ë¥¼ ê±°ë¶€í•  ê¶Œë¦¬ê°€ ìˆìŠµë‹ˆë‹¤.<br><br>
      ìˆ˜ì‹  ë™ì˜ ì‹œ ì´ì§€ë³´ë“œì˜ ì‹ ê·œ ê¸°ëŠ¥ ì•ˆë‚´, ì´ë²¤íŠ¸ ë° í”„ë¡œëª¨ì…˜ ì •ë³´, ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸ ì†Œì‹ì„ ì´ë©”ì¼ ë˜ëŠ” ë¬¸ìë©”ì‹œì§€ë¡œ ë°›ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br>
      ë™ì˜í•˜ì§€ ì•Šìœ¼ì…”ë„ ì„œë¹„ìŠ¤ ì´ìš©ì—ëŠ” ì œí•œì´ ì—†ìœ¼ë©°, ë™ì˜ í›„ì—ë„ ì–¸ì œë“ ì§€ ìˆ˜ì‹ ì„ ê±°ë¶€í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </div></div>
    <div class="modal-footer"><button class="modal-confirm" onclick="closeModal('marketing')">í™•ì¸</button></div>
  </div>
</div>

<footer><strong>ì´ì§€ë³´ë“œ</strong> | ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ í‚¤ì›Œë“œ ë¶„ì„ ì†”ë£¨ì…˜<br>Â© 2026 ì´ì§€ë³´ë“œ. All rights reserved.</footer>
<div class="theme-toggle" id="themeToggle" onclick="toggleTheme()">ğŸŒ™</div>
<div class="toast" id="toast"></div>

<script>
let currentStep=1,phoneVerified=false,timerInt=null,memberType='individual',uploadedFile=null;
const STEPS=4;

// â”€â”€ ë‹¤í¬ëª¨ë“œ â”€â”€
function toggleTheme(){const h=document.documentElement,d=h.getAttribute('data-theme')==='dark';h.setAttribute('data-theme',d?'light':'dark');document.getElementById('themeToggle').textContent=d?'ğŸŒ™':'â˜€ï¸';localStorage.setItem('theme',d?'light':'dark')}
(function(){const t=localStorage.getItem('theme');if(t==='dark'){document.documentElement.setAttribute('data-theme','dark');document.getElementById('themeToggle').textContent='â˜€ï¸'}})();

function showToast(m,t='success'){const e=document.getElementById('toast');e.textContent=m;e.className='toast '+t;setTimeout(()=>e.classList.add('show'),10);setTimeout(()=>e.classList.remove('show'),3000)}
function showMsg(m,t='error'){document.getElementById('msgIcon').textContent=t==='error'?'âš ï¸':'âœ…';document.getElementById('msgText').textContent=m;document.getElementById('msg').className='msg '+t+' show';setTimeout(()=>document.getElementById('msg').classList.remove('show'),4000)}

// â”€â”€ ë¹„ë°€ë²ˆí˜¸ ëˆˆ â”€â”€
function togglePwEye(id,btn){const inp=document.getElementById(id);const isP=inp.type==='password';inp.type=isP?'text':'password';btn.textContent=isP?'ğŸ™ˆ':'ğŸ‘'}

// â”€â”€ ëª¨ë‹¬ â”€â”€
function openModal(id){document.getElementById('modal-'+id).classList.add('show')}
function closeModal(id){document.getElementById('modal-'+id).classList.remove('show')}

// â”€â”€ ì•½ê´€ ì²´í¬ â”€â”€
function toggleAllTerms(){const all=document.getElementById('agreeAll');const checks=document.querySelectorAll('.term-check');const val=!all.checked;all.checked=val;checks.forEach(c=>c.checked=val)}
function syncTerms(){const checks=document.querySelectorAll('.term-check');document.getElementById('agreeAll').checked=[...checks].every(c=>c.checked)}

// â”€â”€ íšŒì› ìœ í˜• â”€â”€
function selectType(type){memberType=type;document.querySelectorAll('.type-card').forEach(c=>c.classList.remove('selected'));document.getElementById('type-'+type).classList.add('selected');document.getElementById('uploadSection').classList.toggle('show',type!=='general');document.getElementById('companyGroup').style.display=type==='general'?'none':'';if(type==='general')document.getElementById('regCompany').value=''}

// â”€â”€ íŒŒì¼ â”€â”€
const da=document.getElementById('uploadArea');
['dragenter','dragover'].forEach(e=>da.addEventListener(e,ev=>{ev.preventDefault();da.classList.add('dragover')}));
['dragleave','drop'].forEach(e=>da.addEventListener(e,ev=>{ev.preventDefault();da.classList.remove('dragover')}));
da.addEventListener('drop',ev=>{if(ev.dataTransfer.files.length)handleFileObj(ev.dataTransfer.files[0])});
function handleFile(inp){if(inp.files.length)handleFileObj(inp.files[0])}
function handleFileObj(f){
  if(!['application/pdf','image/jpeg','image/png'].includes(f.type)){showMsg('pdf, jpg, pngë§Œ ê°€ëŠ¥');return}
  if(f.size>10*1024*1024){showMsg('10MB ì´í•˜ë§Œ ê°€ëŠ¥');return}
  uploadedFile=f;const s=(f.size/(1024*1024)).toFixed(2);
  document.getElementById('fileSizeLabel').textContent=s+'MB / 10MB';
  document.getElementById('fpName').textContent=f.name;document.getElementById('fpSize').textContent=s+'MB';
  document.getElementById('fpIcon').textContent=f.name.endsWith('.pdf')?'ğŸ“‘':'ğŸ–¼ï¸';
  document.getElementById('filePreview').classList.add('show');da.classList.add('has-file');
}
function removeFile(){uploadedFile=null;document.getElementById('fileInput').value='';document.getElementById('filePreview').classList.remove('show');da.classList.remove('has-file');document.getElementById('fileSizeLabel').textContent='0MB / 10MB'}

// â”€â”€ ìŠ¤í… â”€â”€
function goStep(n){
  if(n===2&&currentStep===1&&memberType!=='general'&&!uploadedFile){showMsg('ì‚¬ì—…ì ë“±ë¡ì¦ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.');return}
  if(n===3&&currentStep===2){
    const id=document.getElementById('regId').value.trim(),em=document.getElementById('regEmail').value.trim(),nm=document.getElementById('regName').value.trim(),co=document.getElementById('regCompany').value.trim();
    if(!id||!em||!nm||(memberType!=='general'&&!co)){showMsg('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');return}
    if(!/^[a-zA-Z0-9]{4,20}$/.test(id)){showMsg('ì•„ì´ë””ëŠ” ì˜ë¬¸, ìˆ«ì 4~20ì');return}
    if(!/\S+@\S+\.\S+/.test(em)){showMsg('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');return}
  }
  if(n===4&&!phoneVerified){showMsg('íœ´ëŒ€í° ì¸ì¦ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');return}
  currentStep=n;
  document.querySelectorAll('.step-panel').forEach(p=>p.classList.remove('active'));
  document.getElementById('panel'+n).classList.add('active');
  for(let i=1;i<=STEPS;i++){
    const sn=document.getElementById('sn'+i),sl=document.getElementById('sl'+i);
    sn.classList.remove('active','done');sl.classList.remove('active');
    if(i<n){sn.classList.add('done');sn.textContent='âœ“'}else{sn.textContent=i;if(i===n)sn.classList.add('active')}
    if(i===n)sl.classList.add('active');
    if(i<STEPS)document.getElementById('ln'+i).classList.toggle('active',i<n);
  }
}

// â”€â”€ ì „í™” â”€â”€
document.getElementById('regPhone').addEventListener('input',function(){let v=this.value.replace(/\D/g,'');if(v.length>11)v=v.slice(0,11);if(v.length>7)v=v.slice(0,3)+'-'+v.slice(3,7)+'-'+v.slice(7);else if(v.length>3)v=v.slice(0,3)+'-'+v.slice(3);this.value=v});

async function sendCode(){
  const ph=document.getElementById('regPhone').value.replace(/-/g,'');if(ph.length<10){showMsg('ì˜¬ë°”ë¥¸ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');return}
  const btn=document.getElementById('sendCodeBtn');btn.disabled=true;
  try{const r=await fetch('/api/auth/send-code',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({phone:ph})});const d=await r.json();
    if(d.success){btn.classList.add('sent');btn.textContent='ì¬ë°œì†¡';document.getElementById('codeGroup').style.display='block';showToast('ì¸ì¦ë²ˆí˜¸: '+(d._devCode||'ë°œì†¡ì™„ë£Œ'));startTimer(180)}else showMsg(d.message);
  }catch(e){showMsg('ì„œë²„ ì—°ê²° ì˜¤ë¥˜')}setTimeout(()=>btn.disabled=false,3000);
}
function startTimer(s){clearInterval(timerInt);const el=document.getElementById('codeTimer');el.style.color='var(--amber)';timerInt=setInterval(()=>{const m=Math.floor(s/60),ss=s%60;el.textContent=`ìœ íš¨ì‹œê°„: ${m}:${String(ss).padStart(2,'0')}`;if(--s<0){clearInterval(timerInt);el.textContent='ë§Œë£Œë¨. ì¬ë°œì†¡í•´ì£¼ì„¸ìš”.';el.style.color='var(--red)'}},1000)}
async function verifyCode(){
  const code=document.getElementById('verifyCode').value.trim(),ph=document.getElementById('regPhone').value.replace(/-/g,'');
  if(code.length!==6){showMsg('6ìë¦¬ ì¸ì¦ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');return}
  try{const r=await fetch('/api/auth/verify-code',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({phone:ph,code})});const d=await r.json();
    if(d.success){phoneVerified=true;clearInterval(timerInt);document.getElementById('codeTimer').textContent='âœ… ì¸ì¦ ì™„ë£Œ';document.getElementById('codeTimer').style.color='var(--green)';document.getElementById('step3Next').disabled=false;document.getElementById('regPhone').disabled=true;document.getElementById('verifyCode').disabled=true;showToast('ë³¸ì¸ì¸ì¦ ì™„ë£Œ!')}else showMsg(d.message);
  }catch(e){showMsg('ì„œë²„ ì—°ê²° ì˜¤ë¥˜')}
}

// â”€â”€ ë¹„ë°€ë²ˆí˜¸ ê°•ë„ â”€â”€
function checkPw(){
  const pw=document.getElementById('regPw').value,bar=document.getElementById('pwBar'),msg=document.getElementById('pwMsg');
  if(!pw){bar.style.width='0';msg.textContent='';return}
  let s=0;
  if(pw.length>=8)s++;
  if(/[a-z]/.test(pw)&&/[A-Z]/.test(pw))s++;
  if(/\d/.test(pw))s++;
  if(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(pw))s++;
  const colors=['#EF4444','#F59E0B','#EAB308','#10B981'];
  const labels=['âš ï¸ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤ â€” ì˜ë¬¸ ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ ì¡°í•©í•˜ì„¸ìš”','âš ï¸ ìœ„í—˜í•©ë‹ˆë‹¤ â€” ì¡°í•©ì„ ë” ì¶”ê°€í•˜ì„¸ìš”','ğŸ”’ ë³´í†µì…ë‹ˆë‹¤ â€” ì¡°ê¸ˆ ë” ê°•í™”í•˜ë©´ ì¢‹ì•„ìš”','âœ… ì•ˆì „í•©ë‹ˆë‹¤'];
  bar.style.width=(s*25)+'%';
  bar.style.background=colors[Math.max(0,s-1)]||'var(--gray-border)';
  msg.textContent=labels[Math.max(0,s-1)]||'';
  msg.style.color=colors[Math.max(0,s-1)]||'var(--gray)';
  checkPwMatch();
}
function checkPwMatch(){
  const pw=document.getElementById('regPw').value,pw2=document.getElementById('regPw2').value,msg=document.getElementById('pwMatchMsg');
  if(!pw2){msg.textContent='';return}
  if(pw===pw2){msg.textContent='âœ… ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤';msg.style.color='#10B981'}
  else{msg.textContent='âŒ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤';msg.style.color='#EF4444'}
}

// â”€â”€ ê°€ì… â”€â”€
async function doRegister(){
  const pw=document.getElementById('regPw').value,pw2=document.getElementById('regPw2').value;
  if(!pw||pw.length<8){showMsg('ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒ');return}
  if(pw!==pw2){showMsg('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');return}
  if(!document.getElementById('agree1').checked||!document.getElementById('agree2').checked||!document.getElementById('agree3').checked){showMsg('í•„ìˆ˜ ì•½ê´€ì— ëª¨ë‘ ë™ì˜í•´ì£¼ì„¸ìš”.');return}
  const btn=document.getElementById('registerBtn');btn.disabled=true;btn.textContent='ì²˜ë¦¬ì¤‘...';
  const fd=new FormData();
  fd.append('username',document.getElementById('regId').value.trim());
  fd.append('email',document.getElementById('regEmail').value.trim());
  fd.append('name',document.getElementById('regName').value.trim());
  fd.append('company',document.getElementById('regCompany').value.trim());
  fd.append('phone',document.getElementById('regPhone').value.replace(/-/g,''));
  fd.append('referrer',document.getElementById('regReferrer').value.trim());
  fd.append('password',pw);fd.append('memberType',memberType);
  fd.append('marketing',document.getElementById('agree4').checked?'Y':'N');
  if(uploadedFile)fd.append('bizDoc',uploadedFile);
  try{const r=await fetch('/api/auth/register',{method:'POST',body:fd});const d=await r.json();
    if(d.success){document.querySelectorAll('.step-panel').forEach(p=>p.classList.remove('active'));document.getElementById('panelDone').classList.add('active');document.getElementById('stepsBar').style.display='none';document.getElementById('linkLogin').style.display='none'}else showMsg(d.message);
  }catch(e){showMsg('ì„œë²„ ì—°ê²° ì˜¤ë¥˜')}finally{btn.disabled=false;btn.textContent='íšŒì›ê°€ì… ì‹ ì²­'}
}

// init upload section
document.getElementById('uploadSection').classList.add('show');
</script>
</body></html>
